<section class="relative overflow-hidden md:mt-[100px] mt-[60px] h-[600px] md:py-[100px] md:h-auto">
  <!-- full-bleed background image -->
  <img
    src="{{ section.settings.image | img_url: '1920x1080' }}"
    alt="{{ section.settings.title }}"
    class="absolute object-cover inset-0 w-full h-full md:aspect-[16/9]"
    width="1920"
    height="1080"
  >

  <div
    class="absolute inset-y-0 left-0 w-[92%] sm:w-[72%] md:w-[42%] bg-gradient-to-r from-white via-white/80 to-transparent"
  ></div>

  <div class="container max-w-[var(--container)] mx-auto relative z-10 h-full flex flex-col justify-end pb-[20px] md:pb-0 md:justify-center !px-0">
    <!-- Panel -->
    <div class="max-w-[731px] bg-surface p-[20px] md:p-12 shadow-soft mx-[20px] md:mx-0">
      <h3 class="!text-[32px] ml-[2px] font-[400] lg:!text-[48px] leading-[1.3] text-[#2E2E2D] break-words">
        {{ section.settings.title }}
      </h3>

      <!-- Rich text with custom check bullets -->
      {% assign mobile_intro = section.settings.mobile_intro | strip %}
      <div
        class="
          with-checks mt-[12px] md:mt-4 leading-[1.7] text-[#2E2E2D]
          [&_p]:!text-[14px] [&_p]:!leading-[1.5] [&_p]:!font-[400] md:[&_p]:!text-[20px]
          [&_ul]:list-none [&_ul]:pl-0 [&_li]:!text-[16px] md:[&_li]:!text-[20px] [&_li]:relative [&_li]:pl-8 [&_li]:mt-2
        "
      >
        {% if mobile_intro != blank %}
          <div class="only-mobile">{{ mobile_intro }}</div>
          <div class="only-desktop">{{ section.settings.description }}</div>
        {% else %}
          {{ section.settings.description }}
        {% endif %}
      </div>

      <a
        href="{{ section.settings.collection.url | default: '/collections' }}"
        class="mt-[24px] whitespace-wrap py-[16px] px-[8px] md:mt-12 md:!w-[300px] md:!max-w-[300px] btn-primary"
      >
        {{ section.settings.button }}
      </a>
    </div>
  </div>

  <style>
    /* (no truncation needed when using mobile intro) */
    .only-desktop > p {
      color: #2e2e2d !important;
      font-size: 20px !important;
      font-weight: 400 !important;
    }

    /* Show different content on mobile/desktop when mobile intro is provided */
    @media (max-width: 768px) {
      .only-mobile {
        display: block;
        font-size: 14px !important;
      }
      .only-desktop {
        display: none;
      }
    }
    @media (min-width: 769px) {
      .only-mobile {
        display: none;
      }
      .only-desktop {
        display: block;
      }
    }

    /* Optional: support lists that Shopify wraps in <p><ul>…</ul></p> */
    .with-checks p > ul {
      margin: 0;
      padding: 0;
    }

    @media (max-width: 768px) {
      .with-checks ul li::before {
        width: 16px;
        height: 13px;
      }
    }
  </style>
</section>

{% schema %}
{
  "name": "Ausgewählte Kategorie",
  "settings": [
    { "type": "image_picker", "id": "image", "label": "Bild" },
    { "type": "text", "id": "title", "label": "Titel" },
    { "type": "text", "id": "button", "label": "Taste" },
    { "type": "richtext", "id": "description", "label": "Beschreibung" },
    {
      "type": "richtext",
      "id": "mobile_intro",
      "label": "Mobile Einleitung (optional)",
      "info": "Wird nur auf mobilen Geräten angezeigt. Desktop zeigt die volle Beschreibung."
    },
    { "type": "collection", "id": "collection", "label": "Kollektion" }
  ],
  "presets": [{ "name": "Vorgestellte Kategorie links" }]
}
{% endschema %}
