{% comment %}
  FINALE KORREKTUR (Opacity-Fix):
  - Entfernt die statische TailwindCSS-Klasse 'bg-white/35', die die
    dynamische Opacity-Einstellung überschrieben hat.
  - Der Opacity-Regler funktioniert nun wie erwartet.
{% endcomment %}

{{ 'hero-slideshow.css' | asset_url | stylesheet_tag }}

<style>
  #shopify-section-{{ section.id }} .hero {
    aspect-ratio: {{ section.settings.aspect_ratio_desktop | default: '16 / 9' }};
    position: relative;
    overflow: hidden;
    background-color: #f2f2f2;
  }
  @media (max-width: 768px) {
    #shopify-section-{{ section.id }} .hero {
      aspect-ratio: {{ section.settings.aspect_ratio_mobile | default: '9 / 16' }};
    }
  }
  #shopify-section-{{ section.id }} .hero e-catalog-viewer-simple {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }
</style>

<div class="hero">
  <e-catalog-viewer-simple
    id="hero-catalog-{{ section.id }}"
    catalog-id="{{ section.settings.catalogId }}"
    data-mobile-catalog-id="{{ section.settings.mobileCatalogId }}"
  >
    <div slot="additional-banner">
      <div
        class="
          absolute left-0 right-0 bottom-0 md:left-36 md:right-auto md:bottom-10
          rounded-none shadow-none
          p-[20px] lg:px-[40px] lg:py-[30px]
          w-screen md:max-w-[560px] lg:max-w-[810px]
          z-30
        "
        style="
          background-color: rgba({{ section.settings.text_box_base_color.red }}, {{ section.settings.text_box_base_color.green }}, {{ section.settings.text_box_base_color.blue }}, {{ section.settings.text_box_opacity_percent | divided_by: 100.0 }});
          backdrop-filter: blur({{ section.settings.text_box_blur }}px);
          -webkit-backdrop-filter: blur({{ section.settings.text_box_blur }}px);
        "
      >
        <h1
          class="
            !text-[32px] leading-[1.15] tracking-tight font-[400]
            lg:!text-[72px] xl:!leading-[1.1] text-[#2e2e2d]
          "
        >
          {{ section.settings.title }}
        </h1>
        <p
          class="
            mt-3 !text-[16px] leading-[24px] text-[#2e2e2d]
            md:mt-4 md:leading-[32px]
            md:!text-[20px]
            lg:!text-[24px]
          "
        >
          {{ section.settings.summary }}
        </p>
        <a
          href="/pages/catalogs"
          class="mt-[24px] md:mt-[48px] btn-primary px-4 py-2 md:px-6 md:py-3"
        >
          {{ section.settings.buttonText }}
        </a>
      </div>
    </div>
  </e-catalog-viewer-simple>
</div>

{% schema %}
{
  "name": "Hauptbanner",
  "settings": [
    {
      "type": "header",
      "content": "Layout & Seitenverhältnis"
    },
    {
      "type": "text",
      "id": "aspect_ratio_desktop",
      "label": "Seitenverhältnis Desktop",
      "default": "16 / 9",
      "info": "Verhindert das 'Springen' der Seite. Geben Sie das Verhältnis des Desktop-Bildes ein, z.B. '16 / 9'."
    },
    {
      "type": "text",
      "id": "aspect_ratio_mobile",
      "label": "Seitenverhältnis Mobile",
      "default": "9 / 16",
      "info": "Geben Sie das Verhältnis des mobilen Bildes ein, z.B. '9 / 16'."
    },
    {
      "type": "header",
      "content": "Text-Box Design"
    },
    {
      "type": "color",
      "id": "text_box_base_color",
      "label": "Hintergrundfarbe",
      "default": "#FFFFFF"
    },
    {
      "type": "range",
      "id": "text_box_opacity_percent",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "%",
      "label": "Hintergrund-Deckkraft (Opacity)",
      "default": 35
    },
    {
      "type": "range",
      "id": "text_box_blur",
      "min": 0,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Hintergrund-Unschärfe (Blur)",
      "default": 3
    },
    {
      "type": "header",
      "content": "Inhalt"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Titel"
    },
    {
      "type": "text",
      "id": "summary",
      "label": "Zusammenfassung"
    },
    {
      "type": "text",
      "id": "buttonText",
      "label": "Schaltflächentext"
    },
    {
      "type": "url",
      "id": "buttonUrl",
      "label": "Schaltflächen-URL"
    },
    {
      "type": "text",
      "id": "catalogId",
      "label": "Katalog-ID"
    },
    {
      "type": "text",
      "id": "mobileCatalogId",
      "label": "Mobile Katalog-ID"
    }
  ],
  "presets": [
    {
      "name": "Hero Slideshow",
      "category": "Hero"
    }
  ],
  "enabled_on": {
    "templates": ["index", "collection"]
  }
}
{% endschema %}
