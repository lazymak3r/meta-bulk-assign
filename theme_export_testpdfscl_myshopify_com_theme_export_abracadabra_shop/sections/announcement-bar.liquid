{{ 'section-announcement-bar.js' | asset_url | script_tag }}

<style>
{{ section.settings.desktop_font | font_face }}
{{ section.settings.mobile_font | font_face }}
  .announcement-banner-wrapper-{{ section.id }} {
    display: block;
    text-decoration: none;
    --desktop-bg-color: {{ section.settings.desktop_bg_color }};
    --desktop-text-color: {{ section.settings.desktop_text_color }};
    --desktop-font-family: {{ section.settings.desktop_font.family }}, {{ section.settings.desktop_font.fallback_families }};
    --desktop-font-style: {{ section.settings.desktop_font.style }};
    --desktop-font-weight: {{ section.settings.desktop_font.weight }};
    --mobile-bg-color: {{ section.settings.mobile_bg_color }};
    --mobile-text-color: {{ section.settings.mobile_text_color }};
    --mobile-font-family: {{ section.settings.mobile_font.family }}, {{ section.settings.mobile_font.fallback_families }};
    --mobile-font-style: {{ section.settings.mobile_font.style }};
    --mobile-font-weight: {{ section.settings.mobile_font.weight }};
  }
  .announcement-banner-content {
    padding: 20px 15px;
    text-align: center;
    background-size: cover;
    background-position: center;
  }
  .announcement-banner-content p {
    margin: 0;
    padding: 0;
    line-height: 1.4;
  }
  /* Desktop Version Styles */
  .announcement-banner-desktop {
    background-color: var(--desktop-bg-color);
    color: var(--desktop-text-color);
    font-family: var(--desktop-font-family);
    font-style: var(--desktop-font-style);
    font-weight: var(--desktop-font-weight);
    {% if section.settings.desktop_bg_image != blank %}
      background-image: url('{{ section.settings.desktop_bg_image | image_url: width: 1920 }}');
    {% endif %}
  }
  /* Mobile Version Styles */
  .announcement-banner-mobile {
    display: none; /* Hide mobile by default */
    background-color: var(--mobile-bg-color);
    color: var(--mobile-text-color);
    font-family: var(--mobile-font-family);
    font-style: var(--mobile-font-style);
    font-weight: var(--mobile-font-weight);
    {% if section.settings.mobile_bg_image != blank %}
      background-image: url('{{ section.settings.mobile_bg_image | image_url: width: 750 }}');
    {% endif %}
  }
  /* Media Query to switch between desktop and mobile */
  @media screen and (max-width: 768px) {
    .announcement-banner-desktop {
      display: none; /* Hide desktop on small screens */
    }
    .announcement-banner-mobile {
      display: block; /* Show mobile on small screens */
    }
  }
</style>
{%- liquid
  assign d_line_1 = section.settings.desktop_line_1
  assign d_line_2 = section.settings.desktop_line_2
  assign d_line_3 = section.settings.desktop_line_3
  assign m_line_1 = section.settings.mobile_line_1
  assign m_line_2 = section.settings.mobile_line_2
  assign m_line_3 = section.settings.mobile_line_3
  assign banner_url = section.settings.banner_url
-%}
{%- capture banner_content_desktop -%}
  {%- if d_line_1 != blank -%}<p class="announcement-line-1">{{ d_line_1 }}</p>{%- endif -%}
  {%- if d_line_2 != blank -%}<p class="announcement-line-2">{{ d_line_2 }}</p>{%- endif -%}
  {%- if d_line_3 != blank -%}<p class="announcement-line-3">{{ d_line_3 }}</p>{%- endif -%}
{%- endcapture -%}
{%- capture banner_content_mobile -%}
  {%- if m_line_1 != blank -%}<p class="announcement-line-1">{{ m_line_1 }}</p>{%- endif -%}
  {%- if m_line_2 != blank -%}<p class="announcement-line-2">{{ m_line_2 }}</p>{%- endif -%}
  {%- if m_line_3 != blank -%}<p class="announcement-line-3">{{ m_line_3 }}</p>{%- endif -%}
{%- endcapture -%}
{%- if banner_url != blank -%}
  <a href="{{ banner_url }}" class="announcement-banner-wrapper-{{ section.id }}">
{%- else -%}
  <div class="announcement-banner-wrapper-{{ section.id }}">
{%- endif -%}
  {%- if banner_content_desktop != blank -%}
    <div class="announcement-banner-content announcement-banner-desktop">
      {{ banner_content_desktop }}
    </div>
  {%- endif -%}
  {%- if banner_content_mobile != blank -%}
    <div class="announcement-banner-content announcement-banner-mobile">
      {{ banner_content_mobile }}
    </div>
  {%- endif -%}
{%- if banner_url != blank -%}
  </a>
{%- else -%}
  </div>
{%- endif -%}
{% schema %}
{
  "name": "Announcement Banner",
  "tag": "section",
  "class": "announcement-banner-section",
  "settings": [
    {
      "type": "url",
      "id": "banner_url",
      "label": "Banner Link",
      "info": "Make the entire banner a clickable link."
    },
    {
      "type": "header",
      "content": "Desktop Settings"
    },
    {
      "type": "image_picker",
      "id": "desktop_bg_image",
      "label": "Desktop Background Image",
      "info": "Overrides the background color if set."
    },
    {
      "type": "color",
      "id": "desktop_bg_color",
      "label": "Desktop Background Color",
      "default": "#f5f5f5"
    },
    {
      "type": "richtext",
      "id": "desktop_line_1",
      "label": "Desktop - Line 1",
      "default": "<p><strong>FREE SHIPPING</strong> ON ORDERS OVER $50</p>"
    },
    {
      "type": "richtext",
      "id": "desktop_line_2",
      "label": "Desktop - Line 2",
      "default": "<p>Use code: SHIPFREE</p>"
    },
    {
      "type": "richtext",
      "id": "desktop_line_3",
      "label": "Desktop - Line 3"
    },
    {
      "type": "font_picker",
      "id": "desktop_font",
      "label": "Desktop Font",
      "default": "assistant_n4"
    },
    {
      "type": "color",
      "id": "desktop_text_color",
      "label": "Desktop Text Color",
      "default": "#333333"
    },
    {
      "type": "header",
      "content": "Mobile Settings"
    },
    {
      "type": "image_picker",
      "id": "mobile_bg_image",
      "label": "Mobile Background Image",
      "info": "Overrides the background color if set."
    },
    {
      "type": "color",
      "id": "mobile_bg_color",
      "label": "Mobile Background Color",
      "default": "#333333"
    },
    {
      "type": "richtext",
      "id": "mobile_line_1",
      "label": "Mobile - Line 1",
      "default": "<p><strong>FREE SHIPPING</strong> OVER $50</p>"
    },
    {
      "type": "richtext",
      "id": "mobile_line_2",
      "label": "Mobile - Line 2"
    },
    {
      "type": "richtext",
      "id": "mobile_line_3",
      "label": "Mobile - Line 3"
    },
    {
      "type": "font_picker",
      "id": "mobile_font",
      "label": "Mobile Font",
      "default": "assistant_n4"
    },
    {
      "type": "color",
      "id": "mobile_text_color",
      "label": "Mobile Text Color",
      "default": "#FFFFFF"
    }
  ],
  "presets": [
    {
      "name": "Announcement Banner"
    }
  ]
}
{% endschema %}